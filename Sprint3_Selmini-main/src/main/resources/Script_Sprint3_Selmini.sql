DROP TABLE S3SELMINI_PROFESSORES CASCADE CONSTRAINTS;
DROP TABLE S3SELMINI_ALUNOS CASCADE CONSTRAINTS;
DROP TABLE S3SELMINI_TURMAS CASCADE CONSTRAINTS;
DROP TABLE S3SELMINI_ALUNOS_TURMAS CASCADE CONSTRAINTS;

CREATE TABLE S3SELMINI_PROFESSORES (
    ID_PROFESSOR NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    NOME VARCHAR2(100) NOT NULL,
    ESPECIALIDADE VARCHAR2(100),
    DATA_CONTRATACAO DATE,
    CONSTRAINT PK_S3SELMINI_PROFESSOR PRIMARY KEY (ID_PROFESSOR)
);

CREATE TABLE S3SELMINI_ALUNOS (
    ID_ALUNO NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    NOME VARCHAR2(100) NOT NULL,
    DATA_NASCIMENTO DATE,
    EMAIL VARCHAR2(100) UNIQUE,
    CONSTRAINT PK_S3SELMINI_ALUNO PRIMARY KEY (ID_ALUNO)
);

CREATE TABLE S3SELMINI_TURMAS (
    ID_TURMA NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
    NOME_TURMA VARCHAR2(50) NOT NULL,
    ANO_LETIVO NUMBER(4),
    ID_PROFESSOR NUMBER(10),
    CONSTRAINT PK_S3SELMINI_TURMA PRIMARY KEY (ID_TURMA)
);

CREATE TABLE S3SELMINI_ALUNOS_TURMAS (
    ID_ALUNO NUMBER(10),
    ID_TURMA NUMBER(10),
    CONSTRAINT PK_S3SELMINI_ALUNOS_TURMAS PRIMARY KEY (ID_ALUNO, ID_TURMA)
);


ALTER TABLE S3SELMINI_TURMAS
ADD CONSTRAINT FK_PROFESSOR FOREIGN KEY (ID_PROFESSOR) REFERENCES S3SELMINI_PROFESSORES(ID_PROFESSOR);

ALTER TABLE S3SELMINI_ALUNOS_TURMAS
ADD CONSTRAINT FK_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES S3SELMINI_ALUNOS(ID_ALUNO);

ALTER TABLE S3SELMINI_ALUNOS_TURMAS
ADD CONSTRAINT FK_TURMA FOREIGN KEY (ID_TURMA) REFERENCES S3SELMINI_TURMAS(ID_TURMA);